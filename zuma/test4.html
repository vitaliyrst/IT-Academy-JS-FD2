<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id="canvas"></canvas>
<script>
    class Sprite {
        constructor(options) {
            this.context = options.context;

            this.image = options.image;
            this.frameIndex = 0;
            this.tickCount = 0;
            this.ticksPerFrame = 4;
            this.numberOfFrames = 9;

            this.width = 270;
            this.height = 30;
            this.start()
        }

        update() {
            this.tickCount++;

            if (this.tickCount > this.ticksPerFrame) {
                this.tickCount = 0;
                if (this.frameIndex < this.numberOfFrames - 1) {
                    this.frameIndex++;
                } else {
                    this.frameIndex = 0;
                }
            }
        }

        render() {
            this.context.clearRect(0, 0,100, this.height);
            this.context.save();
            this.context.beginPath();
            this.context.arc(30, 30, 15, 0, Math.PI * 2, false);
            this.context.fill()
            this.context.closePath();
            this.context.clip();
            this.context.drawImage(
                this.image,
                this.frameIndex * this.width / this.numberOfFrames,
                0,
                this.width / this.numberOfFrames,
                this.height,
                0,
                0,
                this.width / this.numberOfFrames,
                this.height
            )
        }

        start() {
            let loop = () => {
                this.update();
                this.render();

                window.requestAnimationFrame(loop);
            }

            window.requestAnimationFrame(loop);
        }
    }

    let canvas = document.getElementById('canvas');
    canvas.width = 100;
    canvas.height = 100;

    let coinImage = new Image();
    coinImage.src = './storage/colors/ball_0.png';

    let sprite = new Sprite({
        ctx: canvas.getContext('2d'),
        image: coinImage,
        width: 270,
        height: 30,
        numberOfFrames: 9,
        ticksPerFrame: 4,
    })
</script>
</body>
</html>